# ×ª×™×¢×•×“ ××œ× - ×–×¨×™××ª ×§×˜×’×•×¨×™×™×ª ×¦×‘×¢ ×•×©×¤×›×˜×œ

> **×ª××¨×™×š ×™×¦×™×¨×”**: 2025-11-15
> **××˜×¨×”**: ×ª×™×¢×•×“ ××¤×•×¨×˜ ×©×œ ×›×œ ×”×–×¨×™××•×ª, ×”×§×‘×¦×™× ×•×”××¡×œ×•×œ×™× ×‘×§×˜×’×•×¨×™×™×ª ×”×¦×‘×¢/×©×¤×›×˜×œ

---

## ğŸ“‹ ×ª×•×›×Ÿ ×¢× ×™×™× ×™×

1. [×¡×§×™×¨×” ×›×œ×œ×™×ª](#×¡×§×™×¨×”-×›×œ×œ×™×ª)
2. [×§×‘×¦×™× ×¢×™×§×¨×™×™×](#×§×‘×¦×™×-×¢×™×§×¨×™×™×)
3. [×–×¨×™××” #1: ×—×™×©×•×‘ ×¤×©×•×˜ (PaintSimulatorV2)](#×–×¨×™××”-1-×—×™×©×•×‘-×¤×©×•×˜-paintsimulatorv2)
4. [×–×¨×™××” #2: ×—×™×©×•×‘ ××ª×§×“× ×œ×¤×™ ×—×“×¨×™× (RoomEstimatesCalculator)](#×–×¨×™××”-2-×—×™×©×•×‘-××ª×§×“×-×œ×¤×™-×—×“×¨×™×-roomestimatescalculator)
5. [×–×¨×™××” #3: ×—×™×©×•×‘ ××ª×§×“× ×¢× PaintRoomsManager](#×–×¨×™××”-3-×—×™×©×•×‘-××ª×§×“×-×¢×-paintroomsmanager)
6. [×–×¨×™××” #4: ×—×™×©×•×‘ ×™×“× ×™ (Manual Calculator)](#×–×¨×™××”-4-×—×™×©×•×‘-×™×“× ×™-manual-calculator)
7. [×ª×¦×•×’×” ×‘×¢×’×œ×” (FloatingCart)](#×ª×¦×•×’×”-×‘×¢×’×œ×”-floatingcart)
8. [×©××™×¨×” ×•×”×¢×œ××” ×-Database](#×©××™×¨×”-×•×”×¢×œ××”-×-database)
9. [×‘×¢×™×•×ª ×™×“×•×¢×•×ª ×•×¤×ª×¨×•× ×•×ª](#×‘×¢×™×•×ª-×™×“×•×¢×•×ª-×•×¤×ª×¨×•× ×•×ª)

---

## ğŸ¯ ×¡×§×™×¨×” ×›×œ×œ×™×ª

×”××¢×¨×›×ª ××¡×¤×§×ª **4 ××¡×œ×•×œ×™× ×©×•× ×™×** ×œ×”×•×¡×¤×ª ×¤×¨×™×˜×™ ×¦×‘×¢/×©×¤×›×˜×œ ×œ×”×¦×¢×ª ××—×™×¨:

1. **×—×™×©×•×‘ ×¤×©×•×˜** - ×”×–× ×ª ×©×˜×—, ×‘×—×™×¨×ª ×¦×‘×¢ ×•××¡×¤×¨ ×©×›×‘×•×ª
2. **×—×™×©×•×‘ ××ª×§×“× ×œ×¤×™ ×—×“×¨×™×** - ×‘×—×™×¨×ª ×¡×•×’×™ ×—×“×¨×™× ×¢× ×©×˜×—×™× ××•×’×“×¨×™× ××¨××©
3. **×—×™×©×•×‘ ××ª×§×“× ×¢× ×›×¨×˜×™×¡×™ ×—×“×¨×™×** - ×× ×”×œ ×—×“×¨×™× ××•×¨×›×‘ ×¢× ×¦×‘×¢ × ×¤×¨×“ ×œ×§×™×¨×•×ª/×ª×§×¨×”
4. **×—×™×©×•×‘ ×™×“× ×™** - ×”×–× ×” ×™×“× ×™×ª ×©×œ ×›×œ ×”×¤×¨××˜×¨×™×

---

## ğŸ“ ×§×‘×¦×™× ×¢×™×§×¨×™×™×

### Frontend Components

| ×§×•×‘×¥ | ××™×§×•× | ×ª×¤×§×™×“ |
|------|-------|-------|
| `ItemSelector.jsx` | `Frontend/src/components/quotes/QuoteBuilder/` | ×§×•××¤×•× × ×˜×” ×¨××©×™×ª - ××›×™×œ×” `PaintRoomsManager` ××•×˜××¢ |
| `PaintSimulatorV2.jsx` | `Frontend/src/components/quotes/QuoteBuilder/` | ×—×™×©×•×‘ ×¤×©×•×˜ - ×‘×—×™×¨×ª ×¦×‘×¢/×©×¤×›×˜×œ + ×©×˜×— + ×©×›×‘×•×ª |
| `RoomEstimatesCalculator.jsx` | `Frontend/src/components/quotes/QuoteBuilder/` | ×—×™×©×•×‘ ××ª×§×“× ×œ×¤×™ ×—×“×¨×™× ××•×’×“×¨×™× ××¨××© |
| `FloatingCart.jsx` | `Frontend/src/components/quotes/QuoteBuilder/` | ×ª×¦×•×’×ª ×”×¢×’×œ×” - ××¦×™×’ ×¤×¨×™×˜×™× ×œ×¤×™ `source` |
| `PaintPriceCalculator.jsx` | `Frontend/src/components/quotes/QuoteBuilder/` | ××—×©×‘×•×Ÿ ×¢×œ×•×™×•×ª ×•××—×™×¨×™× (UI ×‘×œ×‘×“) |
| `PaintSimulator.jsx` | `Frontend/src/components/quotes/QuoteBuilder/` | **×™×©×Ÿ** - ×œ× ×‘×©×™××•×© |
| ~~`PaintRoomsManager.jsx`~~ | ~~`Frontend/src/components/quotes/QuoteBuilder/`~~ | **× ××—×§** - ×§×•×“ ×›×¤×•×œ ×©×œ× ×”×™×” ×‘×©×™××•×© |

### Utilities & Services

| ×§×•×‘×¥ | ××™×§×•× | ×ª×¤×§×™×“ |
|------|-------|-------|
| `paintCalculations.js` | `Frontend/src/components/quotes/QuoteBuilder/utils/` | ×¤×•× ×§×¦×™×•×ª ×—×™×©×•×‘: `calculateExactPaintMetrics` |
| `entities/index.js` | `Frontend/src/lib/entities/` | ×”××¨×•×ª DB: `convertKeysToCamelCase`, `convertKeysToSnakeCase` |

---

## ğŸ”„ ×–×¨×™××” #1: ×—×™×©×•×‘ ×¤×©×•×˜ (PaintSimulatorV2)

### ×ª×™××•×¨
×”××©×ª××© ×‘×•×—×¨ ×¦×‘×¢/×©×¤×›×˜×œ, ××–×™×Ÿ ×©×˜×— ×•××¡×¤×¨ ×©×›×‘×•×ª, ×•×”××¢×¨×›×ª ×™×•×¦×¨×ª ×¤×¨×™×˜ ×‘×¢×’×œ×”.

### ×§×•×‘×¥ ××§×•×¨
`PaintSimulatorV2.jsx` (×©×•×¨×•×ª 12-406)

### ×–×¨×™××ª ×§×•×“

```mermaid
graph TD
    A[××©×ª××© ×œ×•×—×¥ ×¢×œ '×”×•×¡×£ ××–×•×¨ ×¦×‘×¢'] --> B[addPaintArea]
    B --> C[×¤×•×¤-××¤ ×‘×—×™×¨×ª ×¦×‘×¢ + ×©×˜×— + ×©×›×‘×•×ª]
    C --> D[××©×ª××© ×œ×•×—×¥ '×”×•×¡×£ ×¦×‘×¢ ×œ×”×¦×¢×”']
    D --> E[handleAddToQuote type='paint']
    E --> F[×™×¦×™×¨×ª ××•×‘×™×™×§×˜ item]
    F --> G[onAddItemToQuote - ×”×¢×‘×¨×” ×œ-ItemSelector]
    G --> H[ItemSelector ××•×¡×™×£ ×œ-selectedItems]
    H --> I[FloatingCart ××¦×™×’ ×¤×¨×™×˜]
```

### ×§×•×“ ××¤×ª×—

#### 1. ×”×•×¡×¤×ª ××–×•×¨ ×¦×‘×¢ (×©×•×¨×” 44)
```javascript
const addPaintArea = () => {
  setPaintAreas([...paintAreas, {
    id: Date.now(),
    item: null,
    area: '',
    layers: 1
  }]);
};
```

#### 2. ×”×•×¡×¤×” ×œ×¢×’×œ×” (×©×•×¨×•×ª 68-135)
```javascript
const handleAddToQuote = (type) => {
  const areas = type === 'paint' ? paintAreas : plasterAreas;

  areas.forEach(area => {
    if (area.item && area.area > 0) {
      const item = {
        id: `${type}_${area.id}_${Date.now()}`,
        categoryId: 'cat_paint_plaster',
        categoryName: '×¦×‘×¢ ×•×©×¤×›×˜×œ',
        source: `${type}_simulator`,  // â­ ×–×” ×”-source ×”××–×”×”!
        description: `${area.item.itemName} - ${areaValue} ×"×¨`,
        quantity: areaValue,
        unit: '×"×¨',
        layers: layersValue,
        paintType: type === 'paint' ? area.item.itemName : undefined,
        plasterType: type === 'plaster' ? area.item.itemName : undefined,
        unitPrice: Math.round(baseTotalPrice / areaValue),
        totalPrice: Math.round(baseTotalPrice),
        totalCost: Math.round(baseTotalCost),
        materialCost: materialCost,
        laborCost: laborCost,
        profit: Math.round(profit),
        profitPercent: profitPercent,
        workDuration: workDuration,
        itemData: area.item,
      };

      console.log(`ğŸ¨ [PaintSimulatorV2] Adding ${type} item:`, item);
      onAddItemToQuote(item);
    }
  });
};
```

### ×©×“×•×ª ×—×©×•×‘×™× ×‘-item

| ×©×“×” | ×¢×¨×š ×œ×“×•×’××” | ×”×¢×¨×•×ª |
|------|------------|-------|
| `source` | `'paint_simulator'` ××• `'plaster_simulator'` | **×–×™×”×•×™ ×”×¤×¨×™×˜ ×‘×¢×’×œ×”** |
| `paintType` | `'×¡×•×¤×¨×§×¨×™×œ ××˜'` | ×¨×§ ×œ×¦×‘×¢ |
| `plasterType` | `'×’×‘×¡'` | ×¨×§ ×œ×©×¤×›×˜×œ |
| `layers` | `2` | ××¡×¤×¨ ×©×›×‘×•×ª |
| `quantity` | `50` | ×©×˜×— ×‘×"×¨ |
| `totalPrice` | `5000` | ××—×™×¨ ×œ×œ×§×•×— |
| `totalCost` | `3000` | ×¢×œ×•×ª ×§×‘×œ×Ÿ |

### ×ª×¦×•×’×” ×‘×¢×’×œ×”
`FloatingCart.jsx` ×©×•×¨×•×ª 161-210 - `renderSimpleAreaItem()`

```javascript
const renderSimpleAreaItem = (item, onRemoveItem) => {
  const isPaint = item.source === 'paint_simulator';
  const isPlaster = item.source === 'plaster_simulator';

  return (
    <div className="bg-white p-3 rounded-lg shadow-sm border">
      <Paintbrush className={isPaint ? 'text-blue-500' : 'text-orange-500'} />
      <p>{item.description}</p>
      <div>
        <span>×¡×•×’: {item.paintType || item.plasterType}</span>
        <span>×©×›×‘×•×ª: {item.layers}</span>
        <span>×©×˜×—: {item.quantity} ×"×¨</span>
      </div>
    </div>
  );
};
```

---

## ğŸ  ×–×¨×™××” #2: ×—×™×©×•×‘ ××ª×§×“× ×œ×¤×™ ×—×“×¨×™× (RoomEstimatesCalculator)

### ×ª×™××•×¨
×”××©×ª××© ×‘×•×—×¨ ×—×“×¨×™× ××¨×©×™××” ××•×’×“×¨×ª ××¨××© (×—×“×¨ ×©×™× ×”, ×¡×œ×•×Ÿ, ×•×›×•'), ×•×¢×‘×•×¨ ×›×œ ×—×“×¨ ××’×“×™×¨:
- ×›××•×ª (××¡×¤×¨ ×—×“×¨×™× ×××•×ª×• ×¡×•×’)
- ×”×× ×›×•×œ×œ ×ª×§×¨×”
- ×¨××ª ××•×¨×›×‘×•×ª (×¨×’×™×œ/×‘×™× ×•× ×™/××•×¨×›×‘/××•×¨×›×‘ ×××•×“)

×”××¢×¨×›×ª ××—×©×‘×ª ×©×˜×— ××•×˜×•××˜×™×ª ×œ×¤×™ ×—×“×¨×™× ×•××›×¤×™×œ×” ×œ×¤×™ ××•×¨×›×‘×•×ª.

### ×§×•×‘×¥ ××§×•×¨
`RoomEstimatesCalculator.jsx` (×©×•×¨×•×ª 1-952)

### ×–×¨×™××ª ×§×•×“

```mermaid
graph TD
    A[×œ×—×™×¦×” ×¢×œ '×—×™×©×•×‘ ×œ×¤×™ ×—×“×¨×™×' ×‘-PaintSimulatorV2] --> B[openRoomCalculator type='paint']
    B --> C[RoomEstimatesCalculator × ×¤×ª×—]
    C --> D[×˜×¢×™× ×ª ×—×“×¨×™× ××•×’×“×¨×™× ××¨××© ×-user.user_metadata.roomEstimates]
    D --> E[××©×ª××© ×‘×•×—×¨ ×—×“×¨×™×]
    E --> F[×œ×›×œ ×—×“×¨: ×›××•×ª + ×ª×§×¨×” + ××•×¨×›×‘×•×ª]
    F --> G[calculateRoomTypeArea - ×—×™×©×•×‘ ×©×˜×— ×›×•×œ×œ]
    G --> H[×œ×—×™×¦×” ×¢×œ '×”×©×ª××© ×‘×—×™×©×•×‘']
    H --> I[handleConfirm]
    I --> J[×™×¦×™×¨×ª detailedCalculation]
    J --> K[onCalculate detailedCalculation]
    K --> L[PaintSimulatorV2: handleRoomCalcResult]
    L --> M[×™×¦×™×¨×ª item ×¢× source='paint_room_calc']
    M --> N[onAddItemToQuote]
    N --> O[×”×¢×‘×¨×” ×œ-ItemSelector]
    O --> P[FloatingCart ××¦×™×’]
```

### ×§×•×“ ××¤×ª×—

#### 1. ×—×“×¨×™× ××•×’×“×¨×™× ××¨××© (×©×•×¨×•×ª 182-190)
```javascript
const defaultRooms = [
  { id: 'small_bedroom', roomType: '×—×“×¨ ×©×™× ×” ×§×˜×Ÿ', wallAreaSqM: 35, ceilingAreaSqM: 10 },
  { id: 'medium_bedroom', roomType: '×—×“×¨ ×©×™× ×” ×‘×™× ×•× ×™', wallAreaSqM: 40, ceilingAreaSqM: 12 },
  { id: 'large_bedroom', roomType: '×—×“×¨ ×©×™× ×” ×’×“×•×œ', wallAreaSqM: 45, ceilingAreaSqM: 15 },
  { id: 'small_living_room', roomType: '×¡×œ×•×Ÿ ×§×˜×Ÿ', wallAreaSqM: 50, ceilingAreaSqM: 20 },
  { id: 'large_living_room', roomType: '×¡×œ×•×Ÿ ×’×“×•×œ', wallAreaSqM: 80, ceilingAreaSqM: 30 },
  { id: 'kitchen', roomType: '××˜×‘×—', wallAreaSqM: 25, ceilingAreaSqM: 10 },
  { id: 'bathroom', roomType: '×××‘×˜×™×”', wallAreaSqM: 20, ceilingAreaSqM: 5 },
];
```

#### 2. ×¨××•×ª ××•×¨×›×‘×•×ª (×©×•×¨×•×ª 44-70)
```javascript
const COMPLEXITY_OPTIONS = [
  {
    id: 'standard',
    label: '×¨×’×™×œ',
    factor: 1.0,
    description: '×—×“×¨ ×¨×’×™×œ, ×ª×§×¨×•×ª ×¡×˜× ×“×¨×˜×™×•×ª, ×’×™×©×” ×˜×•×‘×”'
  },
  {
    id: 'moderate',
    label: '×‘×™× ×•× ×™',
    factor: 1.15,
    description: '×ª×§×¨×” ×’×‘×•×”×” ××¢×˜, ××¢×˜ ×¤×™× ×•×ª, ×’×™×©×” ×¡×‘×™×¨×”'
  },
  {
    id: 'complex',
    label: '××•×¨×›×‘',
    factor: 1.30,
    description: '×ª×§×¨×” ×’×‘×•×”×”, ×¤×™× ×•×ª ×¨×‘×•×ª, ×’×™×©×” ××•×’×‘×œ×ª'
  },
  {
    id: 'very_complex',
    label: '××•×¨×›×‘ ×××•×“',
    factor: 1.50,
    description: '×ª×§×¨×” ×’×‘×•×”×” ×××•×“, ×¤×¨×˜×™× ×¨×‘×™×, ×’×™×©×” ×§×©×”'
  },
];
```

#### 3. ×—×™×©×•×‘ ×©×˜×— (×©×•×¨×•×ª 199-240)
```javascript
const calculateRoomTypeArea = useCallback(() => {
  let finalTotalWallArea = 0;
  let finalTotalCeilingArea = 0;

  selectedRooms.forEach(selectedRoom => {
    const roomData = roomEstimatesData.find(room => room.id === selectedRoom.id);
    if (roomData) {
      const quantity = selectedRoom.quantity || 1;
      const includeCeiling = selectedRoom.includeCeiling || false;
      const complexityFactor = selectedRoom.difficultyData?.factor || 1.0;

      // ×—×™×©×•×‘ ×©×˜×— ×§×™×¨×•×ª
      let wallArea = roomData.wallAreaSqM * complexityFactor;
      finalTotalWallArea += wallArea * quantity;

      // ×—×™×©×•×‘ ×©×˜×— ×ª×§×¨×” (×¨×§ ×× × ×‘×—×¨)
      if (includeCeiling && roomData.ceilingAreaSqM) {
        const ceilingContribution = (roomData.ceilingAreaSqM * complexityFactor) * quantity;
        finalTotalCeilingArea += ceilingContribution;
      }
    }
  });

  setTotalWallArea(finalTotalWallArea);
  setTotalCeilingArea(finalTotalCeilingArea);
  setCalculatedArea(finalTotalWallArea + finalTotalCeilingArea);
}, [selectedRooms, roomEstimatesData]);
```

#### 4. ×™×¦×™×¨×ª ××•×‘×™×™×§×˜ detailedCalculation (×©×•×¨×•×ª 392-445)
```javascript
const handleConfirm = () => {
  if (calculatedArea > 0) {
    const itemData = workType === 'paint' ? paintItemData : plasterItemData;
    const pricePerSqM = itemData?.pricePerSqM || itemData?.unitPrice || 0;
    const costPerSqM = itemData?.costPerSqM || itemData?.unitCost || 0;

    const detailedCalculation = {
      totalArea: calculatedArea,
      wallSqM: totalWallArea,
      ceilingSqM: totalCeilingArea,
      detailedRooms: selectedRooms.map(selectedRoom => {
        const roomData = roomEstimatesData.find(room => room.id === selectedRoom.id);
        if (roomData) {
          const quantity = selectedRoom.quantity || 1;
          const complexityFactor = selectedRoom.difficultyData?.factor || 1.0;

          const roomTotalWallArea = roomData.wallAreaSqM * complexityFactor * quantity;
          const roomTotalCeilingArea = selectedRoom.includeCeiling
            ? roomData.ceilingAreaSqM * complexityFactor * quantity
            : 0;
          const roomTotalArea = roomTotalWallArea + roomTotalCeilingArea;

          const roomTotalPrice = roomTotalArea * pricePerSqM;
          const roomTotalCost = roomTotalArea * costPerSqM;

          return {
            id: selectedRoom.id,
            name: roomData.roomType,
            quantity: quantity,
            includeCeiling: selectedRoom.includeCeiling || false,
            difficultyData: selectedRoom.difficultyData,
            wallArea: roomTotalWallArea,
            ceilingArea: roomTotalCeilingArea,
            totalArea: roomTotalArea,
            pricePerSqM: pricePerSqM,
            costPerSqM: costPerSqM,
            totalPrice: Math.round(roomTotalPrice),
            totalCost: Math.round(roomTotalCost),
            profit: Math.round(roomTotalPrice - roomTotalCost)
          };
        }
        return null;
      }).filter(Boolean)
    };

    onCalculate(detailedCalculation);
  }
  onClose();
};
```

#### 5. ×§×œ×™×˜×” ×‘-PaintSimulatorV2 (×©×•×¨×•×ª 142-184)
```javascript
const handleRoomCalcResult = (result) => {
  const normalizedResult = {
    ...result,
    totalPrice: result.totalPrice || result.totalSellingPrice || 0,
    totalCost: result.totalCost || result.totalContractorCost || 0,
    materialCost: result.materialCost || (result.totalCost || 0) * 0.6,
    laborCost: result.laborCost || (result.totalCost || 0) * 0.4,
    profit: (result.totalPrice || 0) - (result.totalCost || 0),
    quantity: result.quantity || result.totalArea || 0,
    unit: result.unit || '×"×¨',
    workDuration: result.workDuration || result.totalWorkDays || 0,
  };

  if (currentCalcType === 'paint') {
    const item = {
      id: `paint_room_${Date.now()}`,
      categoryId: 'cat_paint_plaster',
      categoryName: '×¦×‘×¢ ×•×©×¤×›×˜×œ',
      source: 'paint_room_calc',  // â­ ×–×™×”×•×™!
      description: result.description || '×¦×‘×¢ ××—×“×¨×™×',
      ...normalizedResult
    };
    console.log('ğŸ¨ [PaintSimulatorV2] Adding paint room calc item:', item);
    onAddItemToQuote(item);
  }

  setShowRoomCalc(false);
};
```

### ×©×“×•×ª ×—×©×•×‘×™× ×‘-item

| ×©×“×” | ×¢×¨×š ×œ×“×•×’××” | ×”×¢×¨×•×ª |
|------|------------|-------|
| `source` | `'paint_room_calc'` | **×–×™×”×•×™ ×”×¤×¨×™×˜ ×‘×¢×’×œ×”** |
| `detailedRooms` | `[{name: '×¡×œ×•×Ÿ', wallArea: 50, ...}, ...]` | ×¤×™×¨×•×˜ ×—×“×¨×™× |
| `totalArea` | `120` | ×¡×”"×› ×©×˜×— (×§×™×¨×•×ª + ×ª×§×¨×•×ª) |
| `wallSqM` | `100` | ×©×˜×— ×§×™×¨×•×ª |
| `ceilingSqM` | `20` | ×©×˜×— ×ª×§×¨×•×ª |

### ×ª×¦×•×’×” ×‘×¢×’×œ×”
`FloatingCart.jsx` ×©×•×¨×•×ª 212-259 - `renderRoomCalcItem()`

```javascript
const renderRoomCalcItem = (item, onRemoveItem) => {
  return (
    <div className="bg-white p-3 rounded-lg shadow-sm border">
      <Paintbrush className="text-blue-500" />
      <p>{item.description}</p>

      {/* ×¤×™×¨×•×˜ ×—×“×¨×™× */}
      {item.rooms && item.rooms.map((room, idx) => (
        <div key={idx}>
          <span>{room.name}</span>
          <span>{room.area} ×"×¨</span>
        </div>
      ))}
    </div>
  );
};
```

---

## ğŸ¨ ×–×¨×™××” #3: ×—×™×©×•×‘ ××ª×§×“× ×¢× PaintRoomsManager

### ×ª×™××•×¨
×–×”×• ×”×—×™×©×•×‘ ×”××ª×§×“× ×‘×™×•×ª×¨ - ×× ×”×œ ×›×¨×˜×™×¡×™× ×©×œ ×—×“×¨×™× ×¢×:
- ×‘×—×™×¨×ª ×¦×‘×¢ × ×¤×¨×“ ×œ×§×™×¨×•×ª ×•×œ×ª×§×¨×”
- ××¡×¤×¨ ×©×›×‘×•×ª ×©×•× ×” ×œ×§×™×¨×•×ª ×•×ª×§×¨×”
- ×©×˜×—×™× ×¢× × ×™×›×•×™×™× (×¤×ª×—×™×)
- ×ª×™××•×¨ ×•×”×¢×¨×•×ª ×œ×›×œ ×—×“×¨

**×—×©×•×‘**: `PaintRoomsManager` **××•×˜××¢ ×™×©×™×¨×•×ª ×‘-`ItemSelector.jsx`** (×©×•×¨×” 1183+) ×•×œ× ×‘×§×•×‘×¥ × ×¤×¨×“.

### ×§×•×‘×¥ ××§×•×¨
`ItemSelector.jsx` - ×§×•××¤×•× × ×˜×” ××•×˜××¢×ª `PaintRoomsManager` (×©×•×¨×•×ª 1183-1629)

### ×–×¨×™××ª ×§×•×“

```mermaid
graph TD
    A[×‘×—×™×¨×ª ×§×˜×’×•×¨×™×”: '×¦×‘×¢ ×•×©×¤×›×˜×œ'] --> B[ItemSelector ××¦×™×’ PaintRoomsManager]
    B --> C[×”×•×¡×¤×ª ×›×¨×˜×™×¡×™ ×—×“×¨×™×]
    C --> D[×œ×›×œ ×—×“×¨: ×©× + ×©×˜×— ×§×™×¨×•×ª + ×©×˜×— ×ª×§×¨×”]
    D --> E[×‘×—×™×¨×ª ×¦×‘×¢ ×§×™×¨×•×ª + ×©×›×‘×•×ª]
    E --> F[×‘×—×™×¨×ª ×¦×‘×¢ ×ª×§×¨×” + ×©×›×‘×•×ª ××•×¤×¦×™×•× ×œ×™]
    F --> G[×œ×—×™×¦×” ×¢×œ '×”×•×¡×£ ×¤×¨×™×˜ ×–×” ×œ×”×¦×¢×”']
    G --> H[createItemFromRoom]
    H --> I[calculatePaintMetrics ×œ×§×™×¨×•×ª]
    I --> J[calculatePaintMetrics ×œ×ª×§×¨×” ×× × ×‘×—×¨]
    J --> K[×™×¦×™×¨×ª description]
    K --> L[×”×•×¡×¤×” ×œ-selectedItems]
    L --> M[FloatingCart ××¦×™×’]
```

### ×§×•×“ ××¤×ª×—

#### 1. ×”×’×“×¨×ª PaintRoomsManager (×©×•×¨×•×ª 1183-1196)
```javascript
const PaintRoomsManager = React.forwardRef(({
  onAddItem,
  paintItemsAvailable,
  onCalculationComplete
}, ref) => {
  const [rooms, setRooms] = useState([]);
  const [editingRoomId, setEditingRoomId] = useState(null);

  // ... ×§×•×“ × ×™×”×•×œ ×—×“×¨×™×
});
```

#### 2. ×™×¦×™×¨×ª ×¤×¨×™×˜ ××—×“×¨ (×©×•×¨×•×ª 1475-1672)
```javascript
const createItemFromRoom = useCallback((room) => {
  let totalWallPaintCost = 0;
  let totalWallPaintPrice = 0;
  let totalCeilingPaintCost = 0;
  let totalCeilingPaintPrice = 0;

  // ×—×™×©×•×‘ ×¢×œ×•×™×•×ª ×§×™×¨×•×ª
  if (room.wallPaintItem) {
    const wallMetrics = calculatePaintMetrics(
      room.wallArea,
      room.wallPaintLayers || 1,
      room.wallPaintItem,
      false  // roundBuckets
    );
    totalWallPaintCost = wallMetrics.totalCost;
    totalWallPaintPrice = wallMetrics.totalSellingPrice;
  }

  // ×—×™×©×•×‘ ×¢×œ×•×™×•×ª ×ª×§×¨×”
  if (room.ceilingPaintItem && room.ceilingArea > 0) {
    const ceilingMetrics = calculatePaintMetrics(
      room.ceilingArea,
      room.ceilingPaintLayers || 1,
      room.ceilingPaintItem,
      false
    );
    totalCeilingPaintCost = ceilingMetrics.totalCost;
    totalCeilingPaintPrice = ceilingMetrics.totalSellingPrice;
  }

  // ×™×¦×™×¨×ª description
  let description = '';
  if (room.wallPaintItem) {
    description += `×§×™×¨×•×ª: ${room.wallPaintItem.itemName || room.wallPaintItem.paintName} - ${room.wallPaintLayers || 1} ×©×›×‘×•×ª`;
  }
  if (room.ceilingPaintItem && room.ceilingArea > 0) {
    if (description) description += ' | ';
    description += `×ª×§×¨×”: ${room.ceilingPaintItem.itemName || room.ceilingPaintItem.paintName} - ${room.ceilingPaintLayers || 1} ×©×›×‘×•×ª`;
  }

  // ×”×•×¦××ª itemName ×-metrics ×œ×× ×™×¢×ª "×”×“×œ×¤×”" ×‘×™×Ÿ ×¤×¨×™×˜×™×
  const { itemName: metricsItemName, ...metricsWithoutItemName } = metrics;

  const itemToAdd = {
    ...metricsWithoutItemName,
    id: `${room.id}_paint`,
    name: room.name || '×¢×‘×•×“×ª ×¦×‘×¢',
    description: description,
    quantity: totalArea,
    unit: '×"×¨',
    categoryId: 'cat_paint_plaster',
    categoryName: '×¦×‘×¢ ×•×©×¤×›×˜×œ',
    source: 'paint_room_detail',  // â­ ×–×™×”×•×™!

    // ×©×“×•×ª ×¡×¤×¦×™×¤×™×™×
    wallPaintQuantity: room.wallArea || 0,
    ceilingPaintQuantity: room.ceilingArea || 0,
    wallPaintLayers: room.wallPaintLayers || 0,
    ceilingPaintLayers: room.ceilingPaintLayers || 0,
    wallPaintName: room.wallPaintItem?.itemName || room.wallPaintItem?.paintName,
    ceilingPaintName: room.ceilingPaintItem?.itemName || room.ceilingPaintItem?.paintName,

    // ×—×™×©×•×‘×™× ×›×¡×¤×™×™×
    totalCost: totalWallPaintCost + totalCeilingPaintCost,
    totalPrice: totalWallPaintPrice + totalCeilingPaintPrice,
    materialCost: metrics.materialCost,
    laborCost: metrics.laborCost,

    // ×©××™×¨×ª ×”×›×¨×˜×™×¡×™× ×©× ×‘×—×¨×•
    roomBreakdown: room.roomBreakdown || [],
    detailedBreakdown: room.roomBreakdown || [],
  };

  return itemToAdd;
}, []);
```

#### 3. ×¤×•× ×§×¦×™×™×ª calculatePaintMetrics (paintCalculations.js, ×©×•×¨×•×ª 37-159)
```javascript
export const calculateExactPaintMetrics = (
  quantity,      // ×©×˜×— ×‘×"×¨
  layers,        // ××¡×¤×¨ ×©×›×‘×•×ª
  paintItem,     // ×¤×¨×™×˜ ×”×¦×‘×¢
  roundBuckets = false
) => {
  if (!paintItem || quantity <= 0) {
    return {
      materialCost: 0, laborCost: 0, otherCosts: 0,
      totalCost: 0, totalSellingPrice: 0,
      totalWorkDays: 0, totalBucketsNeeded: 0,
      quantity: 0, itemName: '×¤×¨×™×˜ ×œ× ××–×•×”×”'
    };
  }

  const qty = Number(quantity);
  const numLayers = Number(layers);

  // × ×ª×•× ×™ ×‘×¡×™×¡ ××¤×¨×™×˜ ×”×¦×‘×¢
  const bucketPrice = Number(paintItem.bucketPrice || 0);
  const baseCoverage = Number(paintItem.coverage || 0);
  const workerDailyCost = Number(paintItem.workerDailyCost || 0);
  const baseDailyOutput = Number(paintItem.dailyOutput || 0);
  const equipmentCost = Number(paintItem.equipmentCost || 0);
  const profitPercent = Number(paintItem.desiredProfitPercent || 0);

  let exactTotalBucketsNeeded = 0;
  let totalWorkDays = 0;

  // ×—×™×©×•×‘ ×œ×›×œ ×©×›×‘×”
  for (let layer = 1; layer <= numLayers; layer++) {
    let layerCoverage = baseCoverage;
    let layerDailyOutput = baseDailyOutput;

    // ×”×ª×××•×ª ×œ×©×›×‘×” (×× ×§×™×™××•×ª)
    if (layer > 1 && paintItem.layerSettings && paintItem.layerSettings[layer - 1]) {
      const settings = paintItem.layerSettings[layer - 1];
      layerCoverage = baseCoverage * (1 + (settings.coverage || 0) / 100);
      layerDailyOutput = baseDailyOutput * (1 + (settings.dailyOutput || 0) / 100);
    }

    exactTotalBucketsNeeded += qty / layerCoverage;
    totalWorkDays += qty / layerDailyOutput;
  }

  const finalBucketsForCost = roundBuckets
    ? Math.ceil(exactTotalBucketsNeeded)
    : exactTotalBucketsNeeded;

  // ×—×™×©×•×‘ ×¢×œ×•×™×•×ª
  const materialCost = finalBucketsForCost * bucketPrice;
  const laborCost = totalWorkDays * workerDailyCost;
  const otherCosts = (qty * (paintItem.cleaningCostPerMeter || 0)) +
                    (qty * (paintItem.preparationCostPerMeter || 0)) +
                    equipmentCost;
  const totalCost = materialCost + laborCost + otherCosts;

  // ×—×™×©×•×‘ ××—×™×¨ ×œ×œ×§×•×—
  const totalSellingPrice = totalCost * (1 + (profitPercent / 100));

  return {
    materialCost,
    laborCost,
    otherCosts,
    equipmentCost,
    totalCost,
    costPerMeter: qty > 0 ? totalCost / qty : 0,
    totalSellingPrice,
    sellingPricePerMeter: qty > 0 ? totalSellingPrice / qty : 0,
    totalProfit: totalSellingPrice - totalCost,
    profitPercentage: profitPercent,
    totalWorkDays,
    totalBucketsNeeded: finalBucketsForCost,
    originalBucketsNeeded: exactTotalBucketsNeeded,
    quantity: qty,
    itemId: paintItem.id,
    itemName: paintItem.itemName || paintItem.paintName || '×¤×¨×™×˜ ×œ× ××–×•×”×”',
    bucketPrice: bucketPrice
  };
};
```

### ×©×“×•×ª ×—×©×•×‘×™× ×‘-item

| ×©×“×” | ×¢×¨×š ×œ×“×•×’××” | ×”×¢×¨×•×ª |
|------|------------|-------|
| `source` | `'paint_room_detail'` | **×–×™×”×•×™ ×”×¤×¨×™×˜ ×‘×¢×’×œ×”** |
| `description` | `"×§×™×¨×•×ª: ×¡×•×¤×¨×§×¨×™×œ - 2 ×©×›×‘×•×ª \| ×ª×§×¨×”: ×××•×œ×–×™×Ÿ - 1 ×©×›×‘×•×ª"` | ×ª×™××•×¨ ××œ× |
| `wallPaintQuantity` | `45` | ×©×˜×— ×§×™×¨×•×ª |
| `ceilingPaintQuantity` | `15` | ×©×˜×— ×ª×§×¨×” |
| `wallPaintLayers` | `2` | ×©×›×‘×•×ª ×§×™×¨×•×ª |
| `ceilingPaintLayers` | `1` | ×©×›×‘×•×ª ×ª×§×¨×” |
| `wallPaintName` | `'×¡×•×¤×¨×§×¨×™×œ ××˜'` | ×©× ×¦×‘×¢ ×§×™×¨×•×ª |
| `ceilingPaintName` | `'×××•×œ×–×™×Ÿ'` | ×©× ×¦×‘×¢ ×ª×§×¨×” |
| `roomBreakdown` | `[{id: '...', name: '×¡×œ×•×Ÿ', ...}, ...]` | **×©××™×¨×ª ×”×›×¨×˜×™×¡×™×** |
| `detailedBreakdown` | ×–×”×” ×œ-`roomBreakdown` | ×’×™×‘×•×™ |

### ×ª×¦×•×’×” ×‘×¢×’×œ×”
`FloatingCart.jsx` ×©×•×¨×•×ª 263-447 - `renderPaintRoomDetail()`

```javascript
const renderPaintRoomDetail = (item, onRemoveItem) => {
  const itemName = item.itemName || item.paintName || '';
  const layers = item.layers || 0;

  // ×–×™×”×•×™ ×§×™×¨×•×ª + ×ª×§×¨×”
  const hasWalls = item.description?.includes('×§×™×¨×•×ª') ||
                  Number(item.wallPaintQuantity || 0) > 0;
  const hasCeiling = item.description?.includes('×ª×§×¨×”') ||
                    Number(item.ceilingPaintQuantity || 0) > 0;
  const hasBoth = hasWalls && hasCeiling;

  return (
    <div className="bg-white p-3 rounded-lg shadow-sm border">
      <p className="font-semibold">{item.name}</p>

      {hasBoth ? (
        <>
          {/* ×§×™×¨×•×ª */}
          <div>
            <div className="font-medium">×§×™×¨×•×ª</div>
            <div>
              {item.wallPaintName && <span>×¡×•×’: {item.wallPaintName}</span>}
              {item.wallPaintLayers > 0 && <span> â€¢ ×©×›×‘×•×ª: {item.wallPaintLayers}</span>}
              {item.wallPaintQuantity > 0 && <span> â€¢ ×›××•×ª: {item.wallPaintQuantity} ×"×¨</span>}
            </div>
          </div>

          {/* ×ª×§×¨×” */}
          <div>
            <div className="font-medium">×ª×§×¨×”</div>
            <div>
              {item.ceilingPaintName && <span>×¡×•×’: {item.ceilingPaintName}</span>}
              {item.ceilingPaintLayers > 0 && <span> â€¢ ×©×›×‘×•×ª: {item.ceilingPaintLayers}</span>}
              {item.ceilingPaintQuantity > 0 && <span> â€¢ ×›××•×ª: {item.ceilingPaintQuantity} ×"×¨</span>}
            </div>
          </div>
        </>
      ) : (
        /* ×¤×¨×™×˜ ×‘×•×“×“ */
        <div>
          {itemName && <span>×¡×•×’: {itemName}</span>}
          <span>×©×›×‘×•×ª: {layers}</span>
          <span>×©×˜×—: {item.quantity} ×"×¨</span>
        </div>
      )}
    </div>
  );
};
```

---

## âœï¸ ×–×¨×™××” #4: ×—×™×©×•×‘ ×™×“× ×™ (Manual Calculator)

### ×ª×™××•×¨
×”××©×ª××© ××–×™×Ÿ ×™×“× ×™×ª ××ª ×›×œ ×”× ×ª×•× ×™×:
- ×¡×•×’ ×¦×‘×¢ ×œ×§×™×¨×•×ª (×˜×§×¡×˜ ×—×•×¤×©×™)
- ×©×˜×— ×§×™×¨×•×ª + ×©×›×‘×•×ª
- ×¡×•×’ ×¦×‘×¢ ×œ×ª×§×¨×” (××•×¤×¦×™×•× ×œ×™)
- ×©×˜×— ×ª×§×¨×” + ×©×›×‘×•×ª
- ××—×™×¨ ×œ×œ×§×•×—

### ×§×•×‘×¥ ××§×•×¨
`ItemSelector.jsx` - ×§×•××¤×•× × ×˜×” `ManualPaintCalculator` (×©×•×¨×•×ª ~3000+)

### ×–×¨×™××ª ×§×•×“

```mermaid
graph TD
    A[×œ×—×™×¦×” ×¢×œ '×—×™×©×•×‘ ×™×“× ×™'] --> B[ManualPaintCalculator × ×¤×ª×—]
    B --> C[×”×–× ×ª ×¡×•×’ ×¦×‘×¢ ×§×™×¨×•×ª]
    C --> D[×”×–× ×ª ×©×˜×— + ×©×›×‘×•×ª ×§×™×¨×•×ª]
    D --> E[×¡×™××•×Ÿ '×›×•×œ×œ ×ª×§×¨×”' ××•×¤×¦×™×•× ×œ×™]
    E --> F[×”×–× ×ª ×¡×•×’ ×¦×‘×¢ ×ª×§×¨×” + ×©×˜×— + ×©×›×‘×•×ª]
    F --> G[×”×–× ×ª ××—×™×¨ ×œ×œ×§×•×—]
    G --> H[×œ×—×™×¦×” ×¢×œ '×”×•×¡×£ ×œ×”×¦×¢×”']
    H --> I[×™×¦×™×¨×ª item ×¢× source='manual_calc']
    I --> J[×©××™×¨×ª ×›×œ ×”× ×ª×•× ×™× ×‘-manualFormSnapshot]
    J --> K[×”×•×¡×¤×” ×œ-selectedItems]
    K --> L[FloatingCart ××¦×™×’]
```

### ×§×•×“ ××¤×ª×—

#### ×™×¦×™×¨×ª ×¤×¨×™×˜ ×™×“× ×™
```javascript
const handleManualSubmit = () => {
  const wallsArea = Number(manualWallsArea) || 0;
  const ceilingArea = manualIncludeCeiling ? Number(manualCeilingArea) || 0 : 0;
  const totalArea = wallsArea + ceilingArea;
  const totalPrice = Number(manualTotalPrice) || 0;

  const item = {
    id: `manual_paint_${Date.now()}`,
    categoryId: 'cat_paint_plaster',
    categoryName: '×¦×‘×¢ ×•×©×¤×›×˜×œ',
    source: 'manual_calc',  // â­ ×–×™×”×•×™!
    name: '×¦×‘×¢ ×•×©×¤×›×˜×œ (×™×“× ×™)',
    description: `${manualTypeWalls || '×¦×‘×¢'} - ${totalArea} ×"×¨`,
    quantity: totalArea,
    unit: '×"×¨',
    totalPrice: totalPrice,
    totalCost: 0,  // ×œ× ××—×•×©×‘

    // ×©××™×¨×ª ×›×œ ×”× ×ª×•× ×™×
    manualFormSnapshot: {
      walls: {
        enabled: wallsArea > 0,
        area: wallsArea,
        manualType: manualTypeWalls,
        layers: Number(manualWallsLayers) || 0
      },
      ceiling: {
        enabled: manualIncludeCeiling && ceilingArea > 0,
        area: ceilingArea,
        manualType: manualTypeCeiling,
        layers: Number(manualCeilingLayers) || 0
      }
    },

    // ×’×™×‘×•×™ ×‘×©×“×•×ª ×©×˜×•×—×™×
    wallsEnabled: wallsArea > 0,
    wallsArea: wallsArea,
    wallsType: manualTypeWalls,
    wallsLayers: Number(manualWallsLayers) || 0,
    ceilingEnabled: manualIncludeCeiling && ceilingArea > 0,
    ceilingArea: ceilingArea,
    ceilingType: manualTypeCeiling,
    ceilingLayers: Number(manualCeilingLayers) || 0
  };

  addItemToCart(item);
};
```

### ×©×“×•×ª ×—×©×•×‘×™× ×‘-item

| ×©×“×” | ×¢×¨×š ×œ×“×•×’××” | ×”×¢×¨×•×ª |
|------|------------|-------|
| `source` | `'manual_calc'` | **×–×™×”×•×™ ×”×¤×¨×™×˜ ×‘×¢×’×œ×”** |
| `manualFormSnapshot` | `{walls: {...}, ceiling: {...}}` | **× ×ª×•× ×™× ××œ××™×** |
| `wallsEnabled` | `true` | ×”×× ×™×© ×§×™×¨×•×ª |
| `wallsArea` | `50` | ×©×˜×— ×§×™×¨×•×ª |
| `wallsType` | `'×¡×•×¤×¨×§×¨×™×œ'` | ×˜×§×¡×˜ ×—×•×¤×©×™ |
| `wallsLayers` | `2` | ×©×›×‘×•×ª ×§×™×¨×•×ª |
| `ceilingEnabled` | `true` | ×”×× ×™×© ×ª×§×¨×” |
| `ceilingArea` | `15` | ×©×˜×— ×ª×§×¨×” |
| `ceilingType` | `'×××•×œ×–×™×Ÿ'` | ×˜×§×¡×˜ ×—×•×¤×©×™ |
| `ceilingLayers` | `1` | ×©×›×‘×•×ª ×ª×§×¨×” |

### ×ª×¦×•×’×” ×‘×¢×’×œ×”
`FloatingCart.jsx` ×©×•×¨×•×ª 78-159 - `extractManualParts()` ×•-`ManualCartDetails()`

```javascript
// ×¤×•× ×§×¦×™×” ×œ×¤×¢× ×•×— × ×ª×•× ×™×
const extractManualParts = (item) => {
  const snap = item?.manualFormSnapshot || item?.manualMeta || {};

  const wallsEnabled = Boolean(
    snap?.walls?.enabled ??
    snap?.wallsEnabled ??
    Number(snap?.walls?.area ?? snap?.wallsArea) > 0
  );

  const ceilingEnabled = Boolean(
    snap?.ceiling?.enabled ??
    snap?.ceilingEnabled ??
    Number(snap?.ceiling?.area ?? snap?.ceilingArea) > 0
  );

  const walls = {
    enabled: wallsEnabled,
    area: Number(snap?.walls?.area ?? snap?.wallsArea ?? 0),
    type: snap?.walls?.manualType ?? snap?.wallsType ?? '',
    layers: Number(snap?.walls?.layers ?? snap?.wallsLayers ?? 0),
    label: '×§×™×¨×•×ª'
  };

  const ceiling = {
    enabled: ceilingEnabled,
    area: Number(snap?.ceiling?.area ?? snap?.ceilingArea ?? 0),
    type: snap?.ceiling?.manualType ?? snap?.ceilingType ?? '',
    layers: Number(snap?.ceiling?.layers ?? snap?.ceilingLayers ?? 0),
    label: '×ª×§×¨×”'
  };

  return { walls, ceiling };
};

// ×¨×›×™×‘ ×ª×¦×•×’×”
const ManualCartDetails = ({ item }) => {
  const { walls, ceiling } = extractManualParts(item);

  return (
    <div className="mt-1 space-y-1 text-xs text-gray-600">
      {walls.enabled && (
        <div className="flex items-center gap-2">
          <span className="font-medium">×§×™×¨×•×ª:</span>
          <span>{walls.type ? `×¡×•×’ ${walls.type}` : 'â€”'} â€¢ {walls.layers} ×©×›×‘×•×ª â€¢ {walls.area} ××´×¨</span>
        </div>
      )}
      {ceiling.enabled && (
        <div className="flex items-center gap-2">
          <span className="font-medium">×ª×§×¨×”:</span>
          <span>{ceiling.type ? `×¡×•×’ ${ceiling.type}` : 'â€”'} â€¢ {ceiling.layers} ×©×›×‘×•×ª â€¢ {ceiling.area} ××´×¨</span>
        </div>
      )}
    </div>
  );
};
```

---

## ğŸ›’ ×ª×¦×•×’×” ×‘×¢×’×œ×” (FloatingCart)

### ×œ×•×’×™×§×” ×›×œ×œ×™×ª
`FloatingCart.jsx` ××–×”×” ××ª ×¡×•×’ ×”×¤×¨×™×˜ ×œ×¤×™ ×”×©×“×” **`source`** ×•××¦×™×’ ××•×ª×• ×‘×”×ª××.

### ×˜×‘×œ×ª ×–×™×”×•×™

| `source` | ×¤×•× ×§×¦×™×™×ª ×ª×¦×•×’×” | ×©×•×¨×•×ª | ×ª×™××•×¨ |
|----------|---------------|-------|-------|
| `'paint_simulator'` | `renderSimpleAreaItem()` | 161-210 | ×—×™×©×•×‘ ×¤×©×•×˜ - ×¦×‘×¢ |
| `'plaster_simulator'` | `renderSimpleAreaItem()` | 161-210 | ×—×™×©×•×‘ ×¤×©×•×˜ - ×©×¤×›×˜×œ |
| `'paint_room_calc'` | `renderRoomCalcItem()` | 212-259 | ×—×™×©×•×‘ ××ª×§×“× ×œ×¤×™ ×—×“×¨×™× - ×¦×‘×¢ |
| `'plaster_room_calc'` | `renderRoomCalcItem()` | 212-259 | ×—×™×©×•×‘ ××ª×§×“× ×œ×¤×™ ×—×“×¨×™× - ×©×¤×›×˜×œ |
| `'paint_room_detail'` | `renderPaintRoomDetail()` | 263-447 | ×—×™×©×•×‘ ××ª×§×“× ×¢× PaintRoomsManager |
| `'manual_calc'` | `ManualCartDetails()` | 136-159 | ×—×™×©×•×‘ ×™×“× ×™ |
| `'paint_plaster_category_summary'` | `renderPaintSummary()` | 522-777 | ×¡×™×›×•× ×§×˜×’×•×¨×™×” (××¨×•×‘×” ×—×“×¨×™×) |

### ×§×•×“ ×–×™×”×•×™ (×©×•×¨×•×ª 912-964)
```javascript
{group.items.map(item => {
  const isManualItem = isManualCalcItem(item);
  const isPaintSummary = item.categoryId === 'cat_paint_plaster' &&
    (item.source === 'paint_plaster_category_summary' || Array.isArray(item?.detailedBreakdown));
  const isSimpleAreaItem = item.source === 'paint_simulator' || item.source === 'plaster_simulator';
  const isRoomCalcItem = item.source === 'paint_room_calc' || item.source === 'plaster_room_calc';
  const isPaintRoomDetail = item.source === 'paint_room_detail';

  if (isManualItem) {
    return (
      <div key={item.id} className="bg-white p-3 rounded-lg shadow-sm border">
        <p className="font-semibold">{item.description || item.name}</p>
        <ManualCartDetails item={item} />
        <p className="font-bold">{formatPrice(item.totalPrice)} â‚ª</p>
      </div>
    );
  } else if (isPaintSummary) {
    return renderPaintSummary(item, onRemoveItem, paintFallbackRooms, onUpdateItem);
  } else if (isSimpleAreaItem) {
    return renderSimpleAreaItem(item, onRemoveItem);
  } else if (isRoomCalcItem) {
    return renderRoomCalcItem(item, onRemoveItem);
  } else if (isPaintRoomDetail) {
    return renderPaintRoomDetail(item, onRemoveItem);
  } else {
    return renderItem(item, onRemoveItem);  // ×‘×¨×™×¨×ª ××—×“×œ
  }
})}
```

---

## ğŸ’¾ ×©××™×¨×” ×•×”×¢×œ××” ×-Database

### ×¡×§×™×¨×”
×›×œ ×”× ×ª×•× ×™× ××•××¨×™× ×-**camelCase** (Frontend) ×œ-**snake_case** (Database) ×‘×–××Ÿ ×©××™×¨×”, ×•×‘×—×–×¨×” ×‘×–××Ÿ ×§×¨×™××”.

**×‘×¢×™×” ×™×“×•×¢×”**: ×”×©×“×” `items` × ××¦× ×‘×¨×©×™××ª `JSONB_FIELDS_SAVE`, ×›×œ×•××¨ **×œ× ××•××¨ ××•×˜×•××˜×™×ª**.
**×¤×ª×¨×•×Ÿ**: ×”××¨×” ×™×“× ×™×ª ×©×œ `roomBreakdown` ×•-`detailedBreakdown` ×‘×ª×•×š ×”×¤×¨×™×˜×™×.

### ×§×•×‘×¥ ××§×•×¨
`Frontend/src/lib/entities/index.js`

### ×”××¨×•×ª - ×©××™×¨×” (Create / Update)

#### ×©×•×¨×•×ª 304-341
```javascript
static async create(quoteData) {
  // ×”××¨×” ×›×œ×œ×™×ª
  const snakeCaseData = convertKeysToSnakeCase(quoteData);

  // âœ… FIX: ×”××¨×” ×™×“× ×™×ª ×©×œ roomBreakdown/detailedBreakdown ×‘×ª×•×š items
  if (snakeCaseData.items && snakeCaseData.items.length > 0) {
    console.log('ğŸ” [Quote.create] Converting breakdown fields...');
    snakeCaseData.items = snakeCaseData.items.map((item, idx) => {
      const convertedItem = { ...item };

      // roomBreakdown â†’ room_breakdown
      if (item.roomBreakdown !== undefined) {
        convertedItem.room_breakdown = item.roomBreakdown;
        delete convertedItem.roomBreakdown;
        console.log(`ğŸ“¦ Item ${idx}: Converted roomBreakdown`);
      }

      // detailedBreakdown â†’ detailed_breakdown
      if (item.detailedBreakdown !== undefined) {
        convertedItem.detailed_breakdown = item.detailedBreakdown;
        delete convertedItem.detailedBreakdown;
        console.log(`ğŸ“¦ Item ${idx}: Converted detailedBreakdown`);
      }

      return convertedItem;
    });
  }

  const data = await quotesAPI.create(snakeCaseData);
  return data ? convertKeysToCamelCase(data) : null;
}
```

#### ×©×•×¨×•×ª 343-384 (Update - ×–×”×”)
```javascript
static async update(id, updates) {
  const snakeCaseUpdates = convertKeysToSnakeCase(updates);

  // âœ… FIX: ×”××¨×” ×™×“× ×™×ª ×©×œ breakdown fields
  if (snakeCaseUpdates.items && snakeCaseUpdates.items.length > 0) {
    console.log('ğŸ” [Quote.update] Converting breakdown fields...');
    snakeCaseUpdates.items = snakeCaseUpdates.items.map((item, idx) => {
      const convertedItem = { ...item };

      if (item.roomBreakdown !== undefined) {
        convertedItem.room_breakdown = item.roomBreakdown;
        delete convertedItem.roomBreakdown;
      }

      if (item.detailedBreakdown !== undefined) {
        convertedItem.detailed_breakdown = item.detailedBreakdown;
        delete convertedItem.detailedBreakdown;
      }

      return convertedItem;
    });
  }

  const data = await quotesAPI.update(id, snakeCaseUpdates);
  return data ? convertKeysToCamelCase(data) : null;
}
```

### ×”××¨×•×ª - ×§×¨×™××” (Filter / GetById)

#### ×©×•×¨×•×ª 211-254
```javascript
static async filter(filters = {}) {
  const response = await quotesAPI.list(params);
  const quotes = response.quotes || response || [];

  // ×”××¨×” ×›×œ×œ×™×ª
  const converted = quotes.map(quote => {
    const convertedQuote = convertKeysToCamelCase(quote);

    // âœ… FIX: ×”××¨×” ×”×¤×•×›×” ×©×œ breakdown fields
    if (convertedQuote.items && convertedQuote.items.length > 0) {
      console.log(`ğŸ” [Quote.filter] Converting breakdown fields for quote ${convertedQuote.id}...`);
      convertedQuote.items = convertedQuote.items.map((item, idx) => {
        const convertedItem = { ...item };

        // room_breakdown â†’ roomBreakdown
        if (item.room_breakdown !== undefined) {
          convertedItem.roomBreakdown = item.room_breakdown;
          delete convertedItem.room_breakdown;
          console.log(`ğŸ“¦ Item ${idx}: Converted room_breakdown to roomBreakdown`);
        }

        // detailed_breakdown â†’ detailedBreakdown
        if (item.detailed_breakdown !== undefined) {
          convertedItem.detailedBreakdown = item.detailed_breakdown;
          delete convertedItem.detailed_breakdown;
          console.log(`ğŸ“¦ Item ${idx}: Converted detailed_breakdown`);
        }

        return convertedItem;
      });
    }

    return convertedQuote;
  });

  return converted;
}
```

#### ×©×•×¨×•×ª 261-302 (GetById - ×–×”×”)

### ×¨×©×™××ª ×©×“×•×ª ×©× ×©××¨×™× ×‘-`items`

| ×©×“×” Frontend (camelCase) | ×©×“×” DB (snake_case) | ×××™×¨ ××•×˜×•××˜×™×ª? | ×”×¢×¨×•×ª |
|--------------------------|---------------------|-----------------|-------|
| `roomBreakdown` | `room_breakdown` | âŒ **×œ×** | × ×“×¨×©×ª ×”××¨×” ×™×“× ×™×ª |
| `detailedBreakdown` | `detailed_breakdown` | âŒ **×œ×** | × ×“×¨×©×ª ×”××¨×” ×™×“× ×™×ª |
| `categoryId` | `category_id` | âŒ **×œ×** | ×©×“×” ×¤×©×•×˜ ×‘×ª×•×š items |
| `totalPrice` | `total_price` | âŒ **×œ×** | ×©×“×” ×¤×©×•×˜ ×‘×ª×•×š items |
| ×›×œ ×©×“×” ××—×¨ ×‘-items | - | âŒ **×œ×** | items ×‘-JSONB_FIELDS_SAVE |

**×¡×™×‘×”**: `items` × ××¦× ×‘×¨×©×™××ª `JSONB_FIELDS_SAVE` (×©×•×¨×” 16), ×œ×›×Ÿ ×”××¢×¨×›×ª **×œ× ××‘×¦×¢×ª ×”××¨×” ×¨×§×•×¨×¡×™×‘×™×ª** ×¢×œ×™×•.

---

## âš ï¸ ×‘×¢×™×•×ª ×™×“×•×¢×•×ª ×•×¤×ª×¨×•× ×•×ª

### ×‘×¢×™×” #1: ×§×•×“ ×›×¤×•×œ - PaintRoomsManager
**×ª×™××•×¨**: ×”×™×• **×©× ×™** ××™××•×©×™× ×©×œ `PaintRoomsManager`:
1. ×§×•×‘×¥ × ×¤×¨×“: `PaintRoomsManager.jsx`
2. ×§×•××¤×•× × ×˜×” ××•×˜××¢×ª ×‘-`ItemSelector.jsx` (×©×•×¨×” 1183)

**×¤×ª×¨×•×Ÿ**: âœ… **× ××—×§** ×”×§×•×‘×¥ ×”× ×¤×¨×“. × ×©××¨ ×¨×§ ×”××™××•×© ×”××•×˜××¢ ×‘-`ItemSelector.jsx`.

---

### ×‘×¢×™×” #2: roomBreakdown ×œ× × ×©××¨ ×œ-DB
**×ª×™××•×¨**: ×›××©×¨ ×”×•×¡×¤× ×• ×¤×¨×™×˜ ××—×™×©×•×‘ ××ª×§×“× ×¢× `roomBreakdown`, ×”×©×“×” ×œ× × ×©××¨ ×œDB.

**×¡×™×‘×”**: ×”×©×“×” `items` × ××¦× ×‘-`JSONB_FIELDS_SAVE`, ×œ×›×Ÿ ×”××¨×ª camelCaseâ†’snake_case ×œ× ×”×ª×‘×¦×¢×” ××•×˜×•××˜×™×ª.

**×¤×ª×¨×•×Ÿ**: âœ… ×”×•×¡×¤× ×• ×”××¨×” ×™×“× ×™×ª ×‘×¤×•× ×§×¦×™×•×ª `Quote.create` ×•-`Quote.update`:
```javascript
if (item.roomBreakdown !== undefined) {
  convertedItem.room_breakdown = item.roomBreakdown;
  delete convertedItem.roomBreakdown;
}
```

**×§×‘×¦×™× ××¢×•×¨×‘×™×**:
- `Frontend/src/lib/entities/index.js` (×©×•×¨×•×ª 304-341, 343-384)

---

### ×‘×¢×™×” #3: roomBreakdown ×œ× × ×˜×¢×Ÿ ××”-DB ×‘×¢×¨×™×›×”
**×ª×™××•×¨**: ×›××©×¨ ×¢×•×¨×›×™× ×”×¦×¢×ª ××—×™×¨ ×§×™×™××ª, ×”×©×“×” `roomBreakdown` ×œ× × ×˜×¢×Ÿ ×‘×—×–×¨×”.

**×¡×™×‘×”**: ××•×ª×” ×¡×™×‘×” - `items` ×œ× ×¢×•×‘×¨ ×”××¨×” ××•×˜×•××˜×™×ª ×-snake_case ×œ-camelCase.

**×¤×ª×¨×•×Ÿ**: âœ… ×”×•×¡×¤× ×• ×”××¨×” ×”×¤×•×›×” ×‘×¤×•× ×§×¦×™×•×ª `Quote.filter` ×•-`Quote.getById`:
```javascript
if (item.room_breakdown !== undefined) {
  convertedItem.roomBreakdown = item.room_breakdown;
  delete convertedItem.room_breakdown;
}
```

**×§×‘×¦×™× ××¢×•×¨×‘×™×**:
- `Frontend/src/lib/entities/index.js` (×©×•×¨×•×ª 211-254, 261-302)

**×ª×•×¦××”**: âœ… **×¢×•×‘×“!** ××©×ª××© ×“×™×•×•×—: "××¢×•×œ×” ×¢×•×‘×“!"

---

### ×‘×¢×™×” #4: React warning - setState during render
**×ª×™××•×¨**: ××–×”×¨×” ×‘×§×•× ×¡×•×œ:
```
Warning: Cannot update a component (`ItemSelector`) while rendering a different component
```

**×¡×™×‘×”**: `useEffect` ×‘×ª×•×š `ItemSelector` ×§×¨× `setCategoryDataMap` ×ª×•×š ×›×“×™ ×¨×™× ×“×•×¨.

**×¤×ª×¨×•×Ÿ**: âœ… ×¢×˜×¤× ×• ××ª `setCategoryDataMap` ×‘-`setTimeout`:
```javascript
setTimeout(() => {
  setCategoryDataMap(newMap);
}, 0);
```

**×§×‘×¦×™× ××¢×•×¨×‘×™×**:
- `ItemSelector.jsx` (×©×•×¨×” ~3270)

---

### ×‘×¢×™×” #5: itemName "×“×•×œ×£" ×‘×™×Ÿ ×¤×¨×™×˜×™×
**×ª×™××•×¨**: ×›×œ ×”×¤×¨×™×˜×™× ××§×‘×œ×™× ××ª ××•×ª×• `itemName`.

**×¡×™×‘×”**: ××•×‘×™×™×§×˜ `metrics` ××•×—×–×¨ ×-`calculatePaintMetrics` ×•××›×™×œ ×©×“×” `itemName`. ×›××©×¨ ×¢×•×©×™× spread ×¢×œ `metrics`, ×”-`itemName` ××•×¢×ª×§ ×œ×›×œ ×”×¤×¨×™×˜×™×.

**×¤×ª×¨×•×Ÿ**: âœ… ×”×•×¦×× ×• ××ª `itemName` ×œ×¤× ×™ ×”-spread:
```javascript
const { itemName: metricsItemName, ...metricsWithoutItemName } = metrics;

const itemToAdd = {
  ...metricsWithoutItemName,
  name: room.name || '×¢×‘×•×“×ª ×¦×‘×¢',
  // ...
};
```

**×§×‘×¦×™× ××¢×•×¨×‘×™×**:
- `ItemSelector.jsx` (×©×•×¨×” ~1636)

---

### ×‘×¢×™×” #6: console.log ×œ× ××•×¤×™×¢ ×‘×¢×’×œ×” + ×¤×¨×™×˜×™× ××ª×¢×¨×‘×‘×™×
**×ª×™××•×¨**:
1. × ×•×¡×£ `console.log` ×‘-`FloatingCart.jsx` ××‘×œ ×œ× ×”×•×¤×™×¢ ×‘×§×•× ×¡×•×œ
2. ×¤×¨×™×˜×™× ××—×™×©×•×‘ ××ª×§×“× (PaintRoomsManager) ×”×•×¦×’×• ×‘-`renderPaintSummary` ×‘××§×•× ×‘-`renderPaintRoomDetail`

**×¡×™×‘×”**:
×”×ª× ××™ ×©×œ `isPaintSummary` ×ª×¤×¡ ×¤×¨×™×˜×™× ×¢× `source: 'paint_room_detail'` ×›×™:
```javascript
const isPaintSummary = item.categoryId === 'cat_paint_plaster' &&
  (item.source === 'paint_plaster_category_summary' || Array.isArray(item?.detailedBreakdown));
  // â†‘ ×”×‘×¢×™×”: ×”×¤×¨×™×˜ ×™×© ×œ×• detailedBreakdown ××– × ×ª×¤×¡ ×›-summary!
```

×¤×¨×™×˜×™× ×-PaintRoomsManager ×™×© ×œ×”× **×’×** `source: 'paint_room_detail'` **×•×’×** `detailedBreakdown` (××¢×¨×š), ××– ×”×ª× ××™ `Array.isArray(item?.detailedBreakdown)` ××—×–×™×¨ `true`.

**×¤×ª×¨×•×Ÿ**: âœ… **×ª×•×§×Ÿ!**
1. ×”×•×¡×¤× ×• ×‘×“×™×§×” ×œ-`isPaintRoomDetail` **×œ×¤× ×™** `isPaintSummary`
2. ×©×™× ×™× ×• ××ª ×”×ª× ××™ ×©×œ `isPaintSummary` ×œ×›×œ×•×œ `!isPaintRoomDetail`:

```javascript
// Check for paint room detail items (MUST be before isPaintSummary!)
const isPaintRoomDetail = item.source === 'paint_room_detail';

// âœ… FIX: Only treat as summary if explicitly marked OR has detailedBreakdown BUT NOT paint_room_detail
const isPaintSummary = item.categoryId === 'cat_paint_plaster' &&
  !isPaintRoomDetail &&  // â† ×–×” ×”×ª×™×§×•×Ÿ!
  (item.source === 'paint_plaster_category_summary' || Array.isArray(item?.detailedBreakdown));
```

**×§×‘×¦×™× ××¢×•×¨×‘×™×**:
- `FloatingCart.jsx` (×©×•×¨×•×ª 916-928)

**×ª×•×¦××”**:
- âœ… ×¤×¨×™×˜×™× ×-PaintRoomsManager ××•×¦×’×™× ×›×¢×ª ×‘-`renderPaintRoomDetail` (× ×›×•×Ÿ!)
- âœ… ×”×œ×•×’×™× ××•×¤×™×¢×™× ×›×¢×ª ×‘×§×•× ×¡×•×œ
- âœ… ××™×Ÿ ×¢×•×“ ×¢×¨×‘×•×‘ ×‘×™×Ÿ ×¡×•×’×™ ×”×¤×¨×™×˜×™×

---

## ğŸ¯ ×¡×™×›×•× ×•×”××œ×¦×•×ª

### âœ… ××” ×©×¢×•×‘×“
1. âœ… ×”×—×™×©×•×‘ ×”×¤×©×•×˜ ×‘-`PaintSimulatorV2` - ×™×¦×™×‘
2. âœ… ×—×™×©×•×‘ ××ª×§×“× ×œ×¤×™ ×—×“×¨×™× ×‘-`RoomEstimatesCalculator` - ×™×¦×™×‘
3. âœ… ×—×™×©×•×‘ ××ª×§×“× ×¢× PaintRoomsManager - **×™×¦×™×‘ ×•××•×¦×’ × ×›×•×Ÿ ×‘×¢×’×œ×”!**
4. âœ… ×©××™×¨×” ×•×”×¢×œ××” ×©×œ `roomBreakdown` ×-DB - **×ª×•×§×Ÿ!**
5. âœ… ××—×™×§×ª ×”×§×•×“ ×”×›×¤×•×œ (`PaintRoomsManager.jsx`) - **×‘×•×¦×¢!**
6. âœ… ×ª×™×§×•×Ÿ ×”-`itemName` leaking - **×ª×•×§×Ÿ!**
7. âœ… ×ª×™×§×•×Ÿ ×¢×¨×‘×•×‘ ×¤×¨×™×˜×™× ×‘×¢×’×œ×” - **×ª×•×§×Ÿ!**

### ğŸŸ¡ ××” ×©×“×•×¨×© ×©×™×¤×•×¨ (×œ× ×§×¨×™×˜×™)
1. ğŸŸ¡ ×ª×¦×•×’×ª ×¤×¨×™×˜×™× ××•×¨×›×‘×™× - **× ×™×ª×Ÿ ×œ×©×¤×¨ UX**
2. ğŸŸ¡ ×”×•×¡×¤×ª validations ×œ×¤× ×™ ×™×¦×™×¨×ª ×¤×¨×™×˜×™×

### ğŸ’¡ ×”××œ×¦×•×ª ×œ×©×™×¤×•×¨
1. **××™×—×•×“ ××‘× ×” × ×ª×•× ×™×**: ×œ×•×•×“× ×©×›×œ ×¡×•×’×™ ×”×¤×¨×™×˜×™× ××©×ª××©×™× ×‘××•×ª× ×©××•×ª ×©×“×•×ª (×œ××©×œ `layers`, `quantity`, `description`)
2. **×ª×™×¢×•×“ ×‘×¨×•×¨**: ×œ×”×•×¡×™×£ ×”×¢×¨×•×ª ×‘×§×•×“ ×¢×œ ××‘× ×” ×”× ×ª×•× ×™× ×”×¦×¤×•×™ ×œ×›×œ `source`
3. **×˜×™×¤×•×œ ×‘×©×’×™××•×ª**: ×œ×”×•×¡×™×£ validations ×‘×–××Ÿ ×™×¦×™×¨×ª ×¤×¨×™×˜×™×
4. **×‘×“×™×§×•×ª ××•×˜×•××˜×™×•×ª**: ×œ×›×ª×•×‘ unit tests ×œ×¤×•× ×§×¦×™×•×ª ×”××¨×” ×‘-`entities/index.js`

---

## ğŸ“Œ × ×¡×¤×—×™×

### × ×¡×¤×— A: ××¤×ª ×§×‘×¦×™× ××œ××”

```
Frontend/src/components/quotes/QuoteBuilder/
â”œâ”€â”€ ItemSelector.jsx              [×§×•×‘×¥ ×¨××©×™ - 3500+ ×©×•×¨×•×ª]
â”‚   â”œâ”€â”€ PaintRoomsManager         [××•×˜××¢ ×‘×©×•×¨×” 1183]
â”‚   â”œâ”€â”€ ManualPaintCalculator     [××•×˜××¢ ×‘×©×•×¨×” ~3000]
â”‚   â””â”€â”€ ×§×•××¤×•× × ×˜×•×ª ××—×¨×•×ª...
â”œâ”€â”€ PaintSimulatorV2.jsx          [×—×™×©×•×‘ ×¤×©×•×˜]
â”œâ”€â”€ RoomEstimatesCalculator.jsx   [×—×™×©×•×‘ ××ª×§×“× ×œ×¤×™ ×—×“×¨×™×]
â”œâ”€â”€ FloatingCart.jsx              [×ª×¦×•×’×ª ×¢×’×œ×”]
â”œâ”€â”€ PaintPriceCalculator.jsx      [UI ××—×©×‘×•×Ÿ]
â”œâ”€â”€ PaintSimulator.jsx            [×™×©×Ÿ - ×œ× ×‘×©×™××•×©]
â””â”€â”€ utils/
    â””â”€â”€ paintCalculations.js      [×¤×•× ×§×¦×™×•×ª ×—×™×©×•×‘]

Frontend/src/lib/entities/
â””â”€â”€ index.js                      [×”××¨×•×ª DB]
```

### × ×¡×¤×— B: ××‘× ×” ××•×‘×™×™×§×˜ `item` ××œ×

```javascript
{
  // ×–×™×”×•×™
  id: 'paint_room_123456',
  source: 'paint_room_detail',  // â­ ××¤×ª×— ×”×–×™×”×•×™!
  categoryId: 'cat_paint_plaster',
  categoryName: '×¦×‘×¢ ×•×©×¤×›×˜×œ',

  // ×ª×™××•×¨
  name: '×¦×‘×¢ ×œ×¡×œ×•×Ÿ',
  description: '×§×™×¨×•×ª: ×¡×•×¤×¨×§×¨×™×œ - 2 ×©×›×‘×•×ª | ×ª×§×¨×”: ×××•×œ×–×™×Ÿ - 1 ×©×›×‘×•×ª',

  // ×›××•×™×•×ª
  quantity: 60,           // ×¡×”"×› ×©×˜×—
  unit: '×"×¨',
  layers: 2,              // ×©×›×‘×•×ª (×××•×¦×¢ ××• ×§×™×¨×•×ª)

  // ×¤×¨×˜×™ ×§×™×¨×•×ª
  wallPaintQuantity: 45,
  wallPaintLayers: 2,
  wallPaintName: '×¡×•×¤×¨×§×¨×™×œ ××˜',

  // ×¤×¨×˜×™ ×ª×§×¨×”
  ceilingPaintQuantity: 15,
  ceilingPaintLayers: 1,
  ceilingPaintName: '×××•×œ×–×™×Ÿ',

  // ××—×™×¨×™×
  totalPrice: 8000,       // ××—×™×¨ ×œ×œ×§×•×—
  totalCost: 5000,        // ×¢×œ×•×ª ×§×‘×œ×Ÿ
  materialCost: 3000,
  laborCost: 2000,
  profit: 3000,
  profitPercent: 60,

  // ×—×™×©×•×‘×™×
  workDuration: 2.5,      // ×™××™ ×¢×‘×•×“×”

  // ×©××™×¨×ª ×”×›×¨×˜×™×¡×™× (PaintRoomsManager)
  roomBreakdown: [
    {
      id: 'room_1',
      name: '×¡×œ×•×Ÿ',
      wallArea: 45,
      ceilingArea: 15,
      wallPaintItem: {...},
      ceilingPaintItem: {...},
      wallPaintLayers: 2,
      ceilingPaintLayers: 1
    }
  ],
  detailedBreakdown: [...],  // ×’×™×‘×•×™ ×©×œ roomBreakdown

  // ×—×™×©×•×‘ ×™×“× ×™ (Manual Calculator)
  manualFormSnapshot: {
    walls: {
      enabled: true,
      area: 45,
      manualType: '×¡×•×¤×¨×§×¨×™×œ',
      layers: 2
    },
    ceiling: {
      enabled: true,
      area: 15,
      manualType: '×××•×œ×–×™×Ÿ',
      layers: 1
    }
  }
}
```

### × ×¡×¤×— C: ×˜×‘×œ×ª sources ×•×–×¨×™××•×ª

| Source | ×–×¨×™××” | ×§×•×‘×¥ ×™×¦×™×¨×” | ×¤×•× ×§×¦×™×™×ª ×ª×¦×•×’×” | ×”×¢×¨×•×ª |
|--------|-------|-----------|---------------|-------|
| `paint_simulator` | #1 | PaintSimulatorV2.jsx | renderSimpleAreaItem | ×—×™×©×•×‘ ×¤×©×•×˜ - ×¦×‘×¢ |
| `plaster_simulator` | #1 | PaintSimulatorV2.jsx | renderSimpleAreaItem | ×—×™×©×•×‘ ×¤×©×•×˜ - ×©×¤×›×˜×œ |
| `paint_room_calc` | #2 | RoomEstimatesCalculator.jsx | renderRoomCalcItem | ×—×™×©×•×‘ ××ª×§×“× ×œ×¤×™ ×—×“×¨×™× - ×¦×‘×¢ |
| `plaster_room_calc` | #2 | RoomEstimatesCalculator.jsx | renderRoomCalcItem | ×—×™×©×•×‘ ××ª×§×“× ×œ×¤×™ ×—×“×¨×™× - ×©×¤×›×˜×œ |
| `paint_room_detail` | #3 | ItemSelector.jsx (PaintRoomsManager) | renderPaintRoomDetail | ×—×™×©×•×‘ ××ª×§×“× ×¢× ×›×¨×˜×™×¡×™ ×—×“×¨×™× |
| `manual_calc` | #4 | ItemSelector.jsx (ManualPaintCalculator) | ManualCartDetails | ×—×™×©×•×‘ ×™×“× ×™ |
| `paint_plaster_category_summary` | - | ItemSelector.jsx | renderPaintSummary | ×¡×™×›×•× ××¨×•×‘×” ×—×“×¨×™× |

---

**×ª××¨×™×š ×¢×“×›×•×Ÿ ××—×¨×•×Ÿ**: 2025-11-15
**×’×¨×¡×”**: 1.0
**××—×‘×¨**: Claude Code Assistant
